<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>qat.plugins.CostFunctionPlugin &mdash; myQLM documentation  documentation</title>
      <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../../static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../static/documentation_options.js"></script>
        <script src="../../../static/jquery.js"></script>
        <script src="../../../static/underscore.js"></script>
        <script src="../../../static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../static/doctools.js"></script>
        <script src="../../../static/sphinx_highlight.js"></script>
        <script src="../../../static/design-tabs.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="qat.plugins.PSOMinimizePlugin" href="psominimizeplugin.html" />
    <link rel="prev" title="qat.plugins.ObservableSplitter" href="observablesplitter.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> myQLM documentation
            <img src="../../../static/myqlm-doc-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.9.6-1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../01_getting_started.html">Getting started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../02_user_guide.html">User guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../04_api_reference.html">API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../module_qat.html">qat</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../module_comm.html">qat.comm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_core.html">qat.core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_devices.html">qat.devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_fermion.html">qat.fermion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_generators.html">qat.generators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_hardware.html">qat.hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../%3Amyqlm%3Amodule_interop.html">qat.interop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_lang.html">qat.lang</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_opt.html">qat.opt</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../module_plugins.html">qat.plugins</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="circuitinliner.html">qat.plugins.CircuitInliner</a></li>
<li class="toctree-l4"><a class="reference internal" href="observablesplitter.html">qat.plugins.ObservableSplitter</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">qat.plugins.CostFunctionPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="psominimizeplugin.html">qat.plugins.PSOMinimizePlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="scipyminimizeplugin.html">qat.plugins.ScipyMinimizePlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="spsaminimizeplugin.html">qat.plugins.SPSAMinimizePlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="adaptvqeplugin.html">qat.plugins.AdaptVQEPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="gradientdescentoptimizer.html">qat.plugins.GradientDescentOptimizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="multiplelaunchesanalyzer.html">qat.plugins.MultipleLaunchesAnalyzer</a></li>
<li class="toctree-l4"><a class="reference internal" href="seqoptim.html">qat.plugins.SeqOptim</a></li>
<li class="toctree-l4"><a class="reference internal" href="transformobservable.html">qat.plugins.TransformObservable</a></li>
<li class="toctree-l4"><a class="reference internal" href="zeronoiseextrapolator.html">qat.plugins.ZeroNoiseExtrapolator</a></li>
<li class="toctree-l4"><a class="reference internal" href="abstractplugin.html">qat.plugins.AbstractPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="display.html">qat.plugins.Display</a></li>
<li class="toctree-l4"><a class="reference internal" href="junction.html">qat.plugins.Junction</a></li>
<li class="toctree-l4"><a class="reference internal" href="optimizer.html">qat.plugins.Optimizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="quameleonplugin.html">qat.plugins.QuameleonPlugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="remoteplugin.html">qat.plugins.RemotePlugin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../%3Amyqlm%3Amodule_pylinalg.html">qat.pylinalg</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_qpus.html">qat.qpus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../module_quops.html">qat.quops</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../05_demos.html">Demos</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../%3Amyqlm%3A06_support.html">Contributing to myQLM</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../07_release_notes.html">Release notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">myQLM documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../../04_api_reference.html">API reference</a> &raquo;</li>
          <li><a href="../../module_qat.html">qat</a> &raquo;</li>
          <li><a href="../module_plugins.html">qat.plugins</a> &raquo;</li>
      <li>qat.plugins.CostFunctionPlugin</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="qat-plugins-costfunctionplugin">
<h1>qat.plugins.CostFunctionPlugin<a class="headerlink" href="#qat-plugins-costfunctionplugin" title="Permalink to this heading"></a></h1>
<p>In the myQLM framework, variational optimization plugins are designed to minimize the energy of an observable. This formalism requires to encode
the quantity to be minimized using an observable (which is not always easy to do)</p>
<p>This plugin has been designed to encode this quantity using a Python function. The quantity computed by the cost function given to the will be minimized
by the optimizer plugin present in the stack.</p>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Example of CostFunctionPlugin</div>
<p class="sd-card-text">In this example, one will try to maximize the Hamming weigth of a sample (i.e. maximizing the number of 1 in the state - or minimizing the number of
0 in this state).
This cost function can be easily encoding using an observable but implementing this cost function in Python is easier. The <a class="reference internal" href="#qat.plugins.CostFunctionPlugin" title="qat.plugins.CostFunctionPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CostFunctionPlugin</span></code></a>
has two mode:</p>
<blockquote>
<div><ul class="simple">
<li><p class="sd-card-text"><strong>Function acting on samples:</strong> the function given to this plugin takes a <a class="reference internal" href="../module_core/sample.html#qat.core.Sample" title="qat.core.wrappers.result.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> and returns a <cite>float</cite></p></li>
<li><p class="sd-card-text"><strong>Function acting on results:</strong> the function given to this plugin takes a <a class="reference internal" href="../module_core/result.html#qat.core.Result" title="qat.core.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> and returns a <cite>float</cite></p></li>
</ul>
</div></blockquote>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Function acting on samples</label><div class="sd-tab-content docutils">
<p class="sd-card-text">This example will focus on minimizing the Hamming weight. A basic circuit composed of two qubits, with one RX gate per qubit, will be chosen to illustrate
this example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qat.lang.AQASM</span> <span class="kn">import</span> <span class="n">Program</span><span class="p">,</span> <span class="n">RX</span>

<span class="n">prog</span> <span class="o">=</span> <span class="n">Program</span><span class="p">()</span>
<span class="n">qbits</span> <span class="o">=</span> <span class="n">prog</span><span class="o">.</span><span class="n">qalloc</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">qb</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">qbits</span><span class="p">):</span>
    <span class="n">angle</span> <span class="o">=</span> <span class="n">prog</span><span class="o">.</span><span class="n">new_var</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;V</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">prog</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">RX</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">qb</span><span class="p">)</span>

<span class="n">circ</span> <span class="o">=</span> <span class="n">prog</span><span class="o">.</span><span class="n">to_circ</span><span class="p">()</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">circ</span><span class="o">.</span><span class="n">to_job</span><span class="p">()</span>
</pre></div>
</div>
<p class="sd-card-text">The cost function must be defined, in this mode, the code function takes a <a class="reference internal" href="../module_core/sample.html#qat.core.Sample" title="qat.core.wrappers.result.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> and returns a <cite>float</cite>. For instance,
one can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cost_function</span><span class="p">(</span><span class="n">sample</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function should be minimize. Then, the number of 0 present in the state</span>
<span class="sd">    will be computed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sample</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">bitstring</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">Then, the plugin can be used to optimize the angles of our job</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qat.plugins</span> <span class="kn">import</span> <span class="n">ScipyMinimizePlugin</span><span class="p">,</span> <span class="n">CostFunctionPlugin</span>
<span class="kn">from</span> <span class="nn">qat.qpus</span> <span class="kn">import</span> <span class="n">get_default_qpu</span>

<span class="n">stack</span> <span class="o">=</span> <span class="n">ScipyMinimizePlugin</span><span class="p">()</span> <span class="o">|</span> <span class="n">CostFunctionPlugin</span><span class="p">(</span><span class="n">cost_function</span><span class="p">)</span> <span class="o">|</span> <span class="n">get_default_qpu</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">The final state can be be retrieved, state <span class="math notranslate nohighlight">\(|11\rangle\)</span> is the state having the higher probability</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">job_fixed_angles</span> <span class="o">=</span> <span class="n">job</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="o">.</span><span class="n">parameter_map</span><span class="p">)</span>
<span class="n">result_fixed_angles</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">job_fixed_angles</span><span class="p">)</span>

<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">result_fixed_angles</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">state</span><span class="si">}</span><span class="s2"> has a probability of </span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">probability</span><span class="si">:</span><span class="s2">.2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="mi">01</span><span class="o">&gt;</span> <span class="n">has</span> <span class="n">a</span> <span class="n">probability</span> <span class="n">of</span> <span class="mf">4e-13</span>
<span class="o">|</span><span class="mi">10</span><span class="o">&gt;</span> <span class="n">has</span> <span class="n">a</span> <span class="n">probability</span> <span class="n">of</span> <span class="mf">1.6e-12</span>
<span class="o">|</span><span class="mi">11</span><span class="o">&gt;</span> <span class="n">has</span> <span class="n">a</span> <span class="n">probability</span> <span class="n">of</span> <span class="mf">1.0</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Function acting on results</label><div class="sd-tab-content docutils">
<p class="sd-card-text">This example will focus on minimizing the Hamming weight. A basic circuit composed of two qubits, with one RX gate per qubit, will be chosen to illustrate
this example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qat.lang.AQASM</span> <span class="kn">import</span> <span class="n">Program</span><span class="p">,</span> <span class="n">RX</span>

<span class="n">prog</span> <span class="o">=</span> <span class="n">Program</span><span class="p">()</span>
<span class="n">qbits</span> <span class="o">=</span> <span class="n">prog</span><span class="o">.</span><span class="n">qalloc</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">qb</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">qbits</span><span class="p">):</span>
    <span class="n">angle</span> <span class="o">=</span> <span class="n">prog</span><span class="o">.</span><span class="n">new_var</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;V</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">prog</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">RX</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">qb</span><span class="p">)</span>

<span class="n">circ</span> <span class="o">=</span> <span class="n">prog</span><span class="o">.</span><span class="n">to_circ</span><span class="p">()</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">circ</span><span class="o">.</span><span class="n">to_job</span><span class="p">()</span>
</pre></div>
</div>
<p class="sd-card-text">The cost function must be defined, in this mode, the code function takes a <a class="reference internal" href="../module_core/result.html#qat.core.Result" title="qat.core.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> and returns a <cite>float</cite>. For instance,
one can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cost_function</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function should be minimize. Then, the number of 0 present in the state</span>
<span class="sd">    will be computed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">probability</span> <span class="o">*</span> <span class="n">sample</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">bitstring</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">Then, the plugin can be used to optimize the angles of our job</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p class="sd-card-text"><a class="reference internal" href="#qat.plugins.CostFunctionPlugin" title="qat.plugins.CostFunctionPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">CostFunctionPlugin</span></code></a> assume a function taking a <a class="reference internal" href="../module_core/sample.html#qat.core.Sample" title="qat.core.wrappers.result.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> as argument is provided. To change this
behavior, an argument <cite>is_result_argument=True</cite> must be specified</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qat.plugins</span> <span class="kn">import</span> <span class="n">ScipyMinimizePlugin</span><span class="p">,</span> <span class="n">CostFunctionPlugin</span>
<span class="kn">from</span> <span class="nn">qat.qpus</span> <span class="kn">import</span> <span class="n">get_default_qpu</span>

<span class="n">stack</span> <span class="o">=</span> <span class="n">ScipyMinimizePlugin</span><span class="p">()</span> <span class="o">|</span> <span class="n">CostFunctionPlugin</span><span class="p">(</span><span class="n">cost_function</span><span class="p">,</span> <span class="n">is_result_argument</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">|</span> <span class="n">get_default_qpu</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">The final state can be be retrieved, state <span class="math notranslate nohighlight">\(|11\rangle\)</span> is the state having the higher probability</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">job_fixed_angles</span> <span class="o">=</span> <span class="n">job</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="o">.</span><span class="n">parameter_map</span><span class="p">)</span>
<span class="n">result_fixed_angles</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">job_fixed_angles</span><span class="p">)</span>

<span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">result_fixed_angles</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">state</span><span class="si">}</span><span class="s2"> has a probability of </span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">probability</span><span class="si">:</span><span class="s2">.2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="mi">01</span><span class="o">&gt;</span> <span class="n">has</span> <span class="n">a</span> <span class="n">probability</span> <span class="n">of</span> <span class="mf">1.5e-14</span>
<span class="o">|</span><span class="mi">10</span><span class="o">&gt;</span> <span class="n">has</span> <span class="n">a</span> <span class="n">probability</span> <span class="n">of</span> <span class="mf">3.6e-15</span>
<span class="o">|</span><span class="mi">11</span><span class="o">&gt;</span> <span class="n">has</span> <span class="n">a</span> <span class="n">probability</span> <span class="n">of</span> <span class="mf">1.0</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="qat.plugins.CostFunctionPlugin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">qat.plugins.</span></span><span class="sig-name descname"><span class="pre">CostFunctionPlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_result_argument</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qat.plugins.CostFunctionPlugin" title="Permalink to this definition"></a></dt>
<dd><p>Encoding a cost function using a <a class="reference internal" href="../module_core/observable.html#qat.core.Observable" title="qat.core.Observable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Observable</span></code></a> can be hard. This
plugin can be used to encode a cost function directly in Python. This plugin is designed to be
used between the optimizer and the QPU</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stack</span> <span class="o">=</span> <span class="n">ScipyMinimizePlugin</span><span class="p">()</span> <span class="o">|</span> <span class="n">CostFunctionPlugin</span><span class="p">(</span><span class="n">my_function</span><span class="p">)</span> <span class="o">|</span> <span class="n">PyLinalg</span><span class="p">()</span>
</pre></div>
</div>
<p>A cost function takes a <a class="reference internal" href="../module_core/sample.html#qat.core.Sample" title="qat.core.wrappers.result.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> (or a <a class="reference internal" href="../module_core/result.html#qat.core.Result" title="qat.core.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>)
an return a number that should be minimized</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cost_function</strong> (<em>callable</em>) – cost function taking a <a class="reference internal" href="../module_core/sample.html#qat.core.Sample" title="qat.core.wrappers.result.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> and
return a number</p></li>
<li><p><strong>is_result_argument</strong> (<em>bool</em><em>, </em><em>optional</em>) – <p>argument type passed to the cost function:</p>
<ul>
<li><p>if <code class="code docutils literal notranslate"><span class="pre">use_result=True</span></code>, “cost_function” parameter is expected to be a function taking
a <a class="reference internal" href="../module_core/result.html#qat.core.Result" title="qat.core.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> and returning a float</p></li>
<li><p>if <code class="code docutils literal notranslate"><span class="pre">use_result=False</span></code>, “cost_function” parameter is expected to be a function taking
<a class="reference internal" href="../module_core/sample.html#qat.core.Sample" title="qat.core.wrappers.result.Sample"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sample</span></code></a> and returning a float</p></li>
</ul>
<p>Default: False</p>
</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="qat.plugins.CostFunctionPlugin.compile">
<span class="sig-name descname"><span class="pre">compile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qat.plugins.CostFunctionPlugin.compile" title="Permalink to this definition"></a></dt>
<dd><p>Compiles a job. In practise, this method does nothing to the batch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>batch</strong> (<a class="reference internal" href="../module_core/batch.html#qat.core.Batch" title="qat.core.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>) – batch to compile</p></li>
<li><p><strong>specs</strong> (<a class="reference internal" href="../module_core/hardwarespecs.html#qat.core.HardwareSpecs" title="qat.core.HardwareSpecs"><code class="xref py py-class docutils literal notranslate"><span class="pre">HardwareSpecs</span></code></a>) – hardware specs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>compiled batch</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../module_core/batch.html#qat.core.Batch" title="qat.core.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="observablesplitter.html" class="btn btn-neutral float-left" title="qat.plugins.ObservableSplitter" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="psominimizeplugin.html" class="btn btn-neutral float-right" title="qat.plugins.PSOMinimizePlugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Eviden 2016-2024.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>