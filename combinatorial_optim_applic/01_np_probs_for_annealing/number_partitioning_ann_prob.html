<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Number Partitioning &mdash; myQLM documentation  documentation</title>
      <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../static/documentation_options.js"></script>
        <script src="../../static/jquery.js"></script>
        <script src="../../static/underscore.js"></script>
        <script src="../../static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../static/doctools.js"></script>
        <script src="../../static/sphinx_highlight.js"></script>
        <script src="../../static/design-tabs.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Quantum Approximate Optimization Algorithm (QAOA)" href="../02_qaoa.html" />
    <link rel="prev" title="Vertex Cover" href="vertex_cover_ann_prob.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> myQLM documentation
            <img src="../../static/myqlm-doc-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.10.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../01_getting_started.html">Getting started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../02_user_guide.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../02_user_guide/01_write.html">Writing quantum programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../02_user_guide/02_execute.html">Executing / Simulating quantum programs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../02_user_guide.html#libraries-built-upon-qaptiva">Libraries built upon Qaptiva</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../fermion.html">Spin and fermionic systems</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../combinatorial_optim_applic.html">Combinatorial optimization</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../01_np_probs_for_annealing.html">NP-hard problems</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="../01_np_probs_for_annealing.html#unconstrained-graph-problems">Unconstrained Graph Problems</a></li>
<li class="toctree-l5"><a class="reference internal" href="../01_np_probs_for_annealing.html#constrained-graph-problems">Constrained Graph Problems</a></li>
<li class="toctree-l5 current"><a class="reference internal" href="../01_np_probs_for_annealing.html#other-problems">Other problems</a><ul class="current">
<li class="toctree-l6 current"><a class="current reference internal" href="#">Number Partitioning</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../01_np_probs_for_annealing.html#simulated-quantum-annealing-benchmarking-and-performance">Simulated Quantum Annealing Benchmarking and Performance</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../02_qaoa.html">Quantum Approximate Optimization Algorithm (QAOA)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../03_aqo.html">Adiabatic Quantum Optimization (AQO)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../04_crossing_lattice.html">Crossing lattice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../05_np_problem_generators.html">Problem generators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../%3Amyqlm%3Ainteroperability.html">Interoperability with gate-based framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interoperability_annealing.html">Interoperability with annealing framework</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../04_api_reference.html">API reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../05_demos.html">Demos</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%3Amyqlm%3A06_support.html">Contributing to myQLM</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../07_release_notes.html">Release notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">myQLM documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../02_user_guide.html">User guide</a> &raquo;</li>
          <li><a href="../../combinatorial_optim_applic.html">Combinatorial optimization</a> &raquo;</li>
          <li><a href="../01_np_probs_for_annealing.html">NP-hard problems</a> &raquo;</li>
      <li>Number Partitioning</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="number-partitioning">
<span id="number-partitioning-ann-prob"></span><h1>Number Partitioning<a class="headerlink" href="#number-partitioning" title="Permalink to this heading">ÔÉÅ</a></h1>
<p>Given a set of real and potentially repeating numbers, the problem consists in partitioning them in two subsets, such that the sum
of the numbers in both of them is equal (or as close as possible). To obtain an answer, we would need to use our
<a class="reference internal" href="../../04_api_reference/module_qat/module_opt/numberpartitioning.html#qat.opt.NumberPartitioning" title="qat.opt.number_partitioning.NumberPartitioning"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumberPartitioning</span></code></a> class and anneal <span class="math notranslate nohighlight">\(N\)</span> spins, where <span class="math notranslate nohighlight">\(N\)</span> is the size of the set of numbers.</p>
<p>Solving this problem using the simulated annealing method requires the <a class="reference internal" href="../../04_api_reference/module_qat/module_qpus/%3Amyqlm%3Asimulatedannealing.html#qat.qpus.SimulatedAnnealing" title="qat.qpus.SimulatedAnnealing"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimulatedAnnealing</span></code></a> QPU.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">qat.opt</span> <span class="kn">import</span> <span class="n">NumberPartitioning</span>
<span class="kn">from</span> <span class="nn">qat.qpus</span> <span class="kn">import</span> <span class="n">SimulatedAnnealing</span>
<span class="kn">from</span> <span class="nn">qat.simulated_annealing</span> <span class="kn">import</span> <span class="n">integer_to_spins</span>
<span class="kn">from</span> <span class="nn">qat.core</span> <span class="kn">import</span> <span class="n">Variable</span>

<span class="c1"># Specify the set of numbers</span>
<span class="n">numbers_set</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># Show the set</span>
<span class="nb">print</span><span class="p">(</span><span class="n">numbers_set</span><span class="p">)</span>
<span class="n">number_partitioning_problem</span> <span class="o">=</span> <span class="n">NumberPartitioning</span><span class="p">(</span><span class="n">numbers_set</span><span class="p">)</span>

<span class="c1"># Extract parameters for SA</span>
<span class="n">problem_parameters_dict</span> <span class="o">=</span> <span class="n">number_partitioning_problem</span><span class="o">.</span><span class="n">get_best_parameters</span><span class="p">()</span>
<span class="n">n_steps</span> <span class="o">=</span> <span class="n">problem_parameters_dict</span><span class="p">[</span><span class="s2">&quot;n_steps&quot;</span><span class="p">]</span>
<span class="n">temp_max</span> <span class="o">=</span> <span class="n">problem_parameters_dict</span><span class="p">[</span><span class="s2">&quot;temp_max&quot;</span><span class="p">]</span>
<span class="n">temp_min</span> <span class="o">=</span> <span class="n">problem_parameters_dict</span><span class="p">[</span><span class="s2">&quot;temp_min&quot;</span><span class="p">]</span>

<span class="c1"># Create a temperature schedule and a QPU</span>
<span class="n">tmax</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
<span class="n">temp_t</span> <span class="o">=</span> <span class="n">temp_min</span> <span class="o">*</span> <span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="n">tmax</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp_max</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span> <span class="o">/</span> <span class="n">tmax</span><span class="p">)</span>
<span class="n">sa_qpu</span> <span class="o">=</span> <span class="n">SimulatedAnnealing</span><span class="p">(</span><span class="n">temp_t</span><span class="o">=</span><span class="n">temp_t</span><span class="p">,</span> <span class="n">n_steps</span><span class="o">=</span><span class="n">n_steps</span><span class="p">)</span>

<span class="c1"># Create a job and send it to the QPU</span>
<span class="n">problem_job</span> <span class="o">=</span> <span class="n">number_partitioning_problem</span><span class="o">.</span><span class="n">to_job</span><span class="p">(</span><span class="s1">&#39;sqa&#39;</span><span class="p">,</span> <span class="n">tmax</span><span class="o">=</span><span class="n">tmax</span><span class="p">)</span>
<span class="n">problem_result</span> <span class="o">=</span> <span class="n">sa_qpu</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">problem_job</span><span class="p">)</span>

<span class="c1"># Extract and print the solution configuration</span>
<span class="n">state</span> <span class="o">=</span> <span class="n">problem_result</span><span class="o">.</span><span class="n">raw_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">int</span>  <span class="c1"># raw_data is a list of Samples - one per computation</span>
<span class="n">solution_configuration</span> <span class="o">=</span> <span class="n">integer_to_spins</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers_set</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Solution configuration: </span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">solution_configuration</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Show subsets</span>
<span class="n">indices_spin_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">solution_configuration</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">spin_1_subset</span> <span class="o">=</span> <span class="p">[</span><span class="n">numbers_set</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices_spin_1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The first subset has the numbers:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">spin_1_subset</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">indices_spin_minus_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">solution_configuration</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">spin_minus_1_subset</span> <span class="o">=</span> <span class="p">[</span><span class="n">numbers_set</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">indices_spin_minus_1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The second subset has the numbers:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">spin_minus_1_subset</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">16</span> <span class="mi">20</span> <span class="mi">40</span> <span class="mi">30</span> <span class="mi">20</span>  <span class="mi">9</span> <span class="mi">36</span> <span class="mi">32</span> <span class="mi">11</span> <span class="mi">18</span>  <span class="mi">9</span> <span class="mi">18</span> <span class="mi">48</span> <span class="mi">12</span>  <span class="mi">1</span> <span class="mi">44</span> <span class="mi">14</span> <span class="mi">33</span>  <span class="mi">1</span> <span class="mi">34</span> <span class="mi">47</span> <span class="mi">39</span> <span class="mi">27</span>  <span class="mi">7</span>
 <span class="mi">26</span> <span class="mi">44</span> <span class="mi">12</span> <span class="mi">35</span> <span class="mi">19</span> <span class="mi">28</span><span class="p">]</span>
<span class="n">Solution</span> <span class="n">configuration</span><span class="p">:</span> 
<span class="p">[</span><span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span>  <span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span>  <span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span>
 <span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span>  <span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span> <span class="o">-</span><span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span><span class="p">]</span>

<span class="n">The</span> <span class="n">first</span> <span class="n">subset</span> <span class="n">has</span> <span class="n">the</span> <span class="n">numbers</span><span class="p">:</span>
<span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">28</span><span class="p">]</span>

<span class="n">The</span> <span class="n">second</span> <span class="n">subset</span> <span class="n">has</span> <span class="n">the</span> <span class="n">numbers</span><span class="p">:</span>
<span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">27</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">stdin</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">If</span> <span class="n">SQAQPU</span> <span class="ow">is</span> <span class="n">used</span><span class="p">,</span> <span class="n">gamma_t</span> <span class="n">will</span> <span class="n">be</span> <span class="n">needed</span><span class="o">.</span>
</pre></div>
</div>
<p>This example is also detailed in this notebook on solving <a href="https://mybinder.org/v2/gh/myQLM/myqlm-notebooks/HEAD?filepath=tutorials%2Fcombinatorial_optimization%2Fnumber_partitioning_myqlm.ipynb" style="color: #ff7823; text-decoration: underline; cursor: pointer">Number Partitioning</a> problems with <a class="reference internal" href="../../02_user_guide/02_execute/03_qpu/03_annealing.html#simulated-annealing"><span class="std std-ref">SA</span></a>.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vertex_cover_ann_prob.html" class="btn btn-neutral float-left" title="Vertex Cover" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../02_qaoa.html" class="btn btn-neutral float-right" title="Quantum Approximate Optimization Algorithm (QAOA)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Eviden 2016-2024.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>